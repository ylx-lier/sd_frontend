# 启动脚本使用说明

## 🚀 多种启动方式

### 方式1: 批处理文件（推荐）
```bash
# 在VS Code终端中运行
.\start_app.bat

# 或者在文件资源管理器中双击
start_app.bat
```

### 方式2: PowerShell脚本（支持中文显示）
```powershell
# 在VS Code终端中运行
.\start_app.ps1

# 或者右键选择"用PowerShell运行"
```

### 方式3: 直接运行Python
```bash
# 先清理端口
python clean_ports.py

# 再启动程序
python app_new.py
```

## 🔧 乱码问题解决方案

### 已修复的问题
- ✅ 批处理文件加入了`chcp 65001`来支持UTF-8编码
- ✅ 英文版本避免了中文字符乱码
- ✅ PowerShell版本完全支持中文显示

### 如果仍有乱码
1. **使用PowerShell版本**: `.\start_app.ps1`
2. **设置VS Code终端编码**: 
   - 打开VS Code设置
   - 搜索"terminal encoding"
   - 设置为UTF-8
3. **直接运行Python**: 跳过批处理文件

## 📋 启动过程说明

### 正常启动流程
```
1. 检查和清理端口（7860-7863）
2. 启动AI图像生成器主程序
3. 自动打开浏览器访问界面
4. 程序退出时自动清理端口
```

### 端口状态说明
- ✅ `端口 xxxx 当前可用` - 端口正常
- 🔧 `端口 xxxx 被占用，开始清理` - 自动清理中
- ✅ `端口 xxxx 清理成功` - 清理完成

## 🌐 访问方式

程序启动后会显示：
```
* Running on local URL:  http://0.0.0.0:7861
```

在浏览器中访问：
- `http://localhost:7861`
- `http://127.0.0.1:7861`

## ⚠️ 常见问题

### 1. 权限问题
如果遇到权限问题，可以：
- 右键选择"以管理员身份运行"
- 或在VS Code中用管理员权限打开

### 2. 端口被占用
程序会自动处理，如果失败可以：
- 运行`python clean_ports.py`手动清理
- 重启计算机（最后手段）

### 3. Python环境问题
确保：
- 已激活正确的conda环境（torch118）
- 安装了所需的依赖包

## 🎯 推荐使用方式

1. **首次使用**: 运行`.\start_app.bat`
2. **日常使用**: 运行`.\start_app.bat`
3. **调试时**: 分别运行清理和启动命令
4. **VS Code**: 直接在终端中运行脚本
